# computor_v2: небольшой интерпретатор математических выражений


Интерпретатор написан на чистом Python и умеет делать базовые математические операции с действительными числами, комплексными числами и матрицами. Кроме того, он поддерживает возможность определять функции и автоматически решать квадратные уравнения.

Работает в консоли в интерактивном режиме.


## Синтаксис

Создание переменных:

```
> varA = 2
2
> varB = 4.242
4.242
> varC = -4.3
-4.3
```

Создание переменных с комплексными числами:

```
> varA = 2*i + 3
3 + 2i
> varB = -4i - 4
-4 - 4i
```

Действительную часть комплексного числа можно опустить или написать перед мнимой, но нельзя сначала написать мнимую часть, а потом действительную.

Создание матриц:

```
> varA = [[2,3];[4,3]]
[ 2 , 3 ]
[ 4 , 3 ]
> varB = [[3,4]]
[ 3 , 4 ]
> varB = [[2+2,4]]
[ 4 , 4 ]
```

Строки матрицы должны быть разделены символом точки с запятой, а выражения внутри каждой строки, означающие элементы матрицы, должны разделяться запятыми.

Числа внутри матрицы могут как задаваться непосредственно, так и вычисляться в виде выражений.

```
> funA(x) = 2*x^5 + 4x^2 - 5*x + 4
2 * x ^ 5 + (4 * x ^ 2 + -1 * 5 * x) + 4
> funB(y) = 43 * y / (4 % 2 * y)
43 * y / 4 % 2 * y
> funC(z) = -2 * z - 5
-2 * z + -1 * 5
```

Переменные можно переприсваивать, в том числе с изменением типа данных:

```
> x = 2
2
> y = x
2
> y = 7
7
> y = 2 * i - 4
4 + -2i
```

Еще переменным можно присваивать результат вычисления выражения:

```
> varA = 2 + 4 *2 - 5 %4 + 2 * (4 + 5)
27
> varB = 2 * varA - 5 %4
53
> funA(x) = varA + varB * 4 - 1 / 2 + x
varA + (varB * 4 + -1 * 1 / 2) + x
> varC = 2 * varA - varB
1
> varD = funA(varC)
239.5
```

Всего поддерживаются 4 базовых операции: "+" (сумма), "-" (разность), "*" (умножение) и "/" (деление). Для действительных чисел еще есть "%" (остаток от целочисленного деления), а для матриц - "**" (умножение). Также доступна операция "^" (возведение в натуральную степень - для матриц, действительных и комплексных чисел). Любые подвыражения можно заключать в скобки - это влияет на порядок выполнения. Минус должен стоять перед числом без пробела, если указывает на знак числа, и с пробелом, если это оператор разности.

Специфический оператор "?" указывает интерпретатору, что вас интересует результат вычисления:

```
> a = 2 * 4 + 4
12
> a + 2 = ?
14
```

С его помощью можно заставить интерпретатор автоматически решить квадратное уравнение:

```
> funA(x) = x^2 + 2x + 1
x ^ 2 + 2 * x + 1
> y = 0
0
> funA(x) = y ?
1 + 2 * x^1 + 1 * x^2 = 0
Une solution sur R :
-1
```

Язык, реализуемый интерпретатором - регистронезависимый. То есть названия "varA" и "vara" для него идентичны.

Пробелы для интерпретатора в основном индифферентны:

```
> varA = 2
2
> varB= 2 * (4 + varA + 3)
18
> varC =2 * varB
36
> varD = 2 *(2 + 4 *varC - 4 /3)
289.3333333333333
```

Однако, к примеру, нельзя написать "xx" в значении "x * x".


## Обработка ошибок

При большинстве видов ошибок интерпретатор пишет не только что именно его не устроило, но и подчеркивает ту часть строки, где находится ошибочный элемент.
